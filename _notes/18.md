---
layout: note
num: 18
---

<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
<script>
let N = 20; // Number of balls
let radius = 150; // Radius of the circle
let angle = 0; // Starting angle
let balls = [];
let lavenderLines = [];
let flickerInterval = 20; // Interval for flickering effect

function setup() {
  createCanvas(800, 800);
  noStroke();
  frameRate(30); // Lower frame rate to make the flicker more noticeable
}

function draw() {
  background(255); // White background

  translate(width / 2, height / 2); // Move origin to the center

  // Calculate ball positions
  balls = [];
  for (let i = 0; i < N; i++) {
    let x = radius * cos(angle + TWO_PI * i / N);
    let y = radius * sin(angle + TWO_PI * i / N);
    balls.push({ x, y });
  }

  // Draw balls
  for (let i = 0; i < N; i++) {
    fill(0, 128, 128); // Teal color for the balls
    ellipse(balls[i].x, balls[i].y, 20, 20);
  }

  // Occasionally create new lavender lines
  if (frameCount % flickerInterval === 0) {
    lavenderLines = [];
    let connections = int(random(1, N / 2 + 1)); // Random number of connections

    for (let i = 0; i < connections; i++) {
      let start = int(random(N));
      let end = int(random(N));
      while (end === start) {
        end = int(random(N));
      }
      lavenderLines.push({ start, end });
    }
  }

  // Draw lavender lines and turn connected balls lavender
  for (let i = 0; i < lavenderLines.length; i++) {
    let start = lavenderLines[i].start;
    let end = lavenderLines[i].end;
    stroke(147, 112, 219); // Dark lavender color
    strokeWeight(2);
    line(balls[start].x, balls[start].y, balls[end].x, balls[end].y);
    noStroke();

    // Turn the connected balls dark lavender
    fill(147, 112, 219); // Dark lavender color
    ellipse(balls[start].x, balls[start].y, 20, 20);
    ellipse(balls[end].x, balls[end].y, 20, 20);
  }

  angle += 0.001; // Increment angle to rotate the balls
}
    </script>
</body>
</html>