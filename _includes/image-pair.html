<!-- Side-by-side images (stacks on mobile via CSS) -->
<div
  class="post-image-pair"
  data-equalize-height="true"
  style="--pair-gap: {{ include.gap | default: '1.5rem' }}; --pair-img-width: {{ include.width | default: '45%' }};"
>
  <img class="post-image post-image--pair" src="{{ include.src1 }}" alt="{{ include.alt1 | default: 'image 1' }}">
  <img class="post-image post-image--pair" src="{{ include.src2 }}" alt="{{ include.alt2 | default: 'image 2' }}">
</div>

<script>
  // Equalize pair heights to the shorter image on desktop
  (function () {
    if (window.__postImagePairEqualize) return;
    window.__postImagePairEqualize = true;

    var onPalmQuery = window.matchMedia("(max-width: 600px)");

    function equalizePair(pair) {
      if (onPalmQuery.matches) {
        pair.querySelectorAll("img").forEach(function (img) {
          img.style.height = "";
        });
        return;
      }

      var imgs = pair.querySelectorAll("img");
      if (imgs.length !== 2) return;

      // Reset to natural height before measuring
      imgs.forEach(function (img) {
        img.style.height = "";
      });

      var h1 = imgs[0].clientHeight;
      var h2 = imgs[1].clientHeight;
      var target = Math.min(h1, h2);

      if (target > 0) {
        imgs.forEach(function (img) {
          img.style.height = target + "px";
        });
      }
    }

    function equalizeAll() {
      document
        .querySelectorAll('.post-image-pair[data-equalize-height="true"]')
        .forEach(equalizePair);
    }

    window.addEventListener("resize", equalizeAll);
    window.addEventListener("load", equalizeAll);
  })();
</script>
